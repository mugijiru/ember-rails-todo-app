<% module_dir = Rails.root.join('app/assets/javascripts/todo-app/modules') %>
<% Dir.each_child(module_dir) do |dir| %>
  <% next unless FileTest.directory?("#{module_dir}/#{dir}") %>
  <% Dir.glob('*.module.es6', base: "#{module_dir}/#{dir}") do |module_file| %>
    <% module_name = File.basename(module_file, '.module.es6') %>
    <% if dir == 'models' %>
      <% klass_name = module_name.underscore.camelize %>
    <% else %>
      <% klass_name = "#{module_name.underscore.camelize}#{dir.underscore.singularize.camelize}" %>
    <% end %>
import <%= klass_name %> from 'todo-app/modules/<%= dir %>/<%= module_name %>';
TodoApp.<%= klass_name %> = <%= klass_name %>;
  <% end %>
<% end %>
